const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-McppjVnx.js","assets/react-core-BwkdTuSg.js","assets/vendor-D410aui4.js","assets/radix-ui-omyR4zpf.js","assets/lucide-icons-CePlpqHy.js","assets/supabase-C8Oa5ukG.js","assets/index-B69pnHHb.css"])))=>i.map(i=>d[i]);
import{o as re,N as ae,s as g,i as _,C as N,h as v,F as ne,G as te,T as le,j as oe,k,m as ie,B as T,O as ce,P as de,Q as me,R as ue,U as pe,L as xe,I as he,V as ge,_ as _e,W as R}from"./index-McppjVnx.js";import{r as m,j as e}from"./react-core-BwkdTuSg.js";import{k as x}from"./vendor-D410aui4.js";import{R as P,V as fe,a9 as M,n as je,o as F,p as K,i as be}from"./lucide-icons-CePlpqHy.js";import"./radix-ui-omyR4zpf.js";import"./supabase-C8Oa5ukG.js";function $e({user:h}){const{connected:E,sendMessage:O}=re(),{sendMessage:U}=ae(),[b,V]=m.useState([]),[A,L]=m.useState(!0),[w,q]=m.useState(null),[s,S]=m.useState(null),[z,$]=m.useState(!1),[I,B]=m.useState(""),[y,Q]=m.useState("pending"),[f,W]=m.useState(!0),j=m.useCallback(async()=>{try{L(!0);let r=g.from("transactions").select(`
          *,
          users:user_id (
            username,
            nickname,
            balance,
            bank_name,
            bank_account,
            bank_holder,
            referrer_id,
            partners:referrer_id (
              opcode,
              secret_key,
              token
            )
          )
        `).order("request_time",{ascending:!1});y!=="all"&&(r=r.eq("status",y));const{data:o,error:t}=await r.limit(100);if(t)throw t;const u=o?.map(d=>({...d,user_id:d.user_id,username:d.users?.username||"ì•Œ ìˆ˜ ì—†ìŒ",nickname:d.users?.nickname||"ì•Œ ìˆ˜ ì—†ìŒ",current_balance:d.users?.balance||0,bank_info:{bank_name:d.users?.bank_name||"",bank_account:d.users?.bank_account||"",bank_holder:d.users?.bank_holder||""}}))||[];V(u),console.log(`ğŸ’° [ê±°ë˜ìŠ¹ì¸] ${y} ìƒíƒœ ê±°ë˜ ${u.length}ê±´ ì¡°íšŒ`),u.length>0&&console.log("ğŸ“Š [ê±°ë˜ ìƒ˜í”Œ]:",{transaction_id:u[0].id,user_id:u[0].user_id,username:u[0].username,has_user_id:!!u[0].user_id})}catch(r){console.error("ê±°ë˜ ìš”ì²­ ì¡°íšŒ ì‹¤íŒ¨:",r),x.error("ê±°ë˜ ìš”ì²­ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{L(!1)}},[y]),C=async r=>{if(s)try{q(s.id),console.log(`ğŸ”„ [ê±°ë˜ì²˜ë¦¬] ${s.transaction_type} ${r} ì‹œì‘:`,{transactionId:s.id,username:s.username,amount:s.amount,currentBalance:s.current_balance});let o=null,t=s.current_balance;if(r==="approve"){let a="",i="",p="";try{const{getAdminOpcode:n,isMultipleOpcode:c}=await _e(async()=>{const{getAdminOpcode:l,isMultipleOpcode:ee}=await import("./index-McppjVnx.js").then(se=>se.aa);return{getAdminOpcode:l,isMultipleOpcode:ee}},__vite__mapDeps([0,1,2,3,4,5,6]));if(s.users?.partners){const l=await n(s.users.partners);if(c(l)){if(l.opcodes.length===0){x.error("ì‚¬ìš© ê°€ëŠ¥í•œ API ì„¤ì •ì´ ì—†ìŠµë‹ˆë‹¤. api_configs í…Œì´ë¸”ì„ í™•ì¸í•˜ì„¸ìš”.");return}a=l.opcodes[0].opcode,p=l.opcodes[0].secretKey,i=l.opcodes[0].token}else a=l.opcode,p=l.secretKey,i=l.token}}catch(n){console.error("âŒ API ì„¤ì • ì¡°íšŒ ì‹¤íŒ¨:",n),x.error(`API ì„¤ì • ì¡°íšŒ ì‹¤íŒ¨: ${n.message}`);return}if(console.log("ğŸ” [íŒŒíŠ¸ë„ˆ ì •ë³´ (api_configs)]:",{has_partners:!!s.users?.partners,has_opcode:!!a,has_token:!!i,has_secretKey:!!p,opcode_preview:a?`${a.substring(0,3)}...`:"NONE"}),!a||!i||!p){console.error("âŒ [API ì„¤ì • ëˆ„ë½]:",{opcode:!!a,token:!!i,secretKey:!!p,referrer_id:s.users?.referrer_id}),x.error("API ì„¤ì •ì´ ì—†ìŠµë‹ˆë‹¤. api_configs í…Œì´ë¸”ì„ í™•ì¸í•˜ì„¸ìš”.");return}try{if(s.transaction_type==="deposit"?(console.log("ğŸ’° [API ì…ê¸ˆ] ì™¸ë¶€ API ì…ê¸ˆ ì²˜ë¦¬ ì‹œì‘"),o=await R.depositBalance(s.username,s.amount,a,i,p)):(console.log("ğŸ’¸ [API ì¶œê¸ˆ] ì™¸ë¶€ API ì¶œê¸ˆ ì²˜ë¦¬ ì‹œì‘"),o=await R.withdrawBalance(s.username,s.amount,a,i,p)),console.log("ğŸ“¡ [API ì‘ë‹µ]:",o),o.data&&!o.error){if(s.transaction_type==="deposit"?t=s.current_balance+s.amount:t=s.current_balance-s.amount,console.log(`âœ… [API ì„±ê³µ + ë¡œì»¬ ê³„ì‚°] ìƒˆë¡œìš´ ì”ê³ : ${t}`,{current_balance:s.current_balance,amount:s.amount,transaction_type:s.transaction_type,calculated_balance:t}),t<0)throw console.error("âŒ [ê³„ì‚° ì˜¤ë¥˜] ì”ê³ ê°€ ìŒìˆ˜ê°€ ë¨:",{current:s.current_balance,amount:s.amount,result:t}),new Error(`ì”ê³ ê°€ ìŒìˆ˜ê°€ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ê³„ì‚° ê²°ê³¼: ${t})`)}else throw new Error(o.error||"API í˜¸ì¶œ ì‹¤íŒ¨")}catch(n){console.error("âŒ [API ì‹¤íŒ¨]:",n),x.error(`ì™¸ë¶€ API ${s.transaction_type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"} ì²˜ë¦¬ ì‹¤íŒ¨: ${n instanceof Error?n.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}`);return}}const u=r==="approve"?"completed":"rejected",d={status:u,processed_at:new Date().toISOString(),processed_by:h?.username||"system",processing_note:I||null,external_transaction_id:o?.data?.transaction_id||o?.data?.id||null,updated_at:new Date().toISOString()};r==="approve"&&(d.balance_after=t);const{error:D}=await g.from("transactions").update(d).eq("id",s.id).eq("status","pending");if(D)throw console.error("âŒ [ê±°ë˜ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨]:",D),D;if(console.log(`âœ… [ê±°ë˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ] ${s.id} -> ${u}`),r==="approve"){const a=s.users?.referrer_id;if(!a)throw console.error("âŒ [ë‹´ë‹¹ ê´€ë¦¬ì ì—†ìŒ]:",{user_id:s.user_id,username:s.username}),new Error("íšŒì›ì˜ ë‹´ë‹¹ ê´€ë¦¬ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");console.log("ğŸ” [ë‹´ë‹¹ ê´€ë¦¬ì í™•ì¸]:",{user_id:s.user_id,username:s.username,responsible_partner_id:a,current_admin_id:h.id});const{data:i,error:p}=await g.from("partners").select("balance, username, level").eq("id",a).single();if(p)throw console.error("âŒ [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì¡°íšŒ ì‹¤íŒ¨]:",p),new Error("ë‹´ë‹¹ ê´€ë¦¬ì ë³´ìœ ê¸ˆì„ ì¡°íšŒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");const n=i?.balance||0;if(console.log("ğŸ’° [ë‹´ë‹¹ ê´€ë¦¬ì ì •ë³´]:",{partner_id:a,username:i?.username,level:i?.level,balance:n}),s.transaction_type==="deposit"){if(console.log("ğŸ’° [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì°¨ê°] ì…ê¸ˆ ì²˜ë¦¬"),console.log("ğŸ’° [í˜„ì¬ ë‹´ë‹¹ ê´€ë¦¬ì ë³´ìœ ê¸ˆ]:",n),console.log("ğŸ’° [ì§€ê¸‰í•  ê¸ˆì•¡]:",s.amount),n<s.amount)throw console.error("âŒ [ë³´ìœ ê¸ˆ ë¶€ì¡±]:",{partner_id:a,partner_username:i?.username,required:s.amount,current:n,shortage:s.amount-n}),new Error(`ë‹´ë‹¹ ê´€ë¦¬ì(${i?.username})ì˜ ë³´ìœ ê¸ˆì´ ë¶€ì¡±í•˜ì—¬ ì…ê¸ˆì„ ìŠ¹ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

í˜„ì¬ ë³´ìœ ê¸ˆ: â‚©${n.toLocaleString()}
ìŠ¹ì¸ ê¸ˆì•¡: â‚©${s.amount.toLocaleString()}
ë¶€ì¡± ê¸ˆì•¡: â‚©${(s.amount-n).toLocaleString()}`);const c=n-s.amount;if(c<0)throw console.error("âŒ [ê³„ì‚° ì˜¤ë¥˜] ë³´ìœ ê¸ˆì´ ìŒìˆ˜ê°€ ë¨:",{partner_id:a,current:n,amount:s.amount,result:c}),new Error(`ì‹œìŠ¤í…œ ì˜¤ë¥˜: ë³´ìœ ê¸ˆ ê³„ì‚° ê²°ê³¼ê°€ ìŒìˆ˜ì…ë‹ˆë‹¤. (${c})`);const{error:l}=await g.from("partners").update({balance:c,updated_at:new Date().toISOString()}).eq("id",a);if(l)throw console.error("âŒ [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì°¨ê° ì‹¤íŒ¨]:",l),new Error("ë‹´ë‹¹ ê´€ë¦¬ì ë³´ìœ ê¸ˆ ì°¨ê°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");console.log("âœ… [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì°¨ê° ì™„ë£Œ]:",{partner_id:a,partner_username:i?.username,before:n,after:c,deducted:s.amount}),await g.from("partner_balance_logs").insert({partner_id:a,balance_before:n,balance_after:c,amount:-s.amount,transaction_type:"deposit_to_user",processed_by:h.id,memo:`íšŒì› ${s.username} ì…ê¸ˆ ìŠ¹ì¸ (ì²˜ë¦¬ì: ${h.username})`})}else if(s.transaction_type==="withdrawal"){console.log("ğŸ’¸ [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì¦ê°€] ì¶œê¸ˆ ì²˜ë¦¬"),console.log("ğŸ’° [í˜„ì¬ ë‹´ë‹¹ ê´€ë¦¬ì ë³´ìœ ê¸ˆ]:",n),console.log("ğŸ’° [íšŒìˆ˜í•  ê¸ˆì•¡]:",s.amount);const c=n+s.amount,{error:l}=await g.from("partners").update({balance:c,updated_at:new Date().toISOString()}).eq("id",a);if(l)throw console.error("âŒ [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì¦ê°€ ì‹¤íŒ¨]:",l),new Error("ë‹´ë‹¹ ê´€ë¦¬ì ë³´ìœ ê¸ˆ ì¦ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");console.log("âœ… [íŒŒíŠ¸ë„ˆ ë³´ìœ ê¸ˆ ì¦ê°€ ì™„ë£Œ]:",{partner_id:a,partner_username:i?.username,before:n,after:c,added:s.amount}),await g.from("partner_balance_logs").insert({partner_id:a,balance_before:n,balance_after:c,amount:s.amount,transaction_type:"withdrawal_from_user",processed_by:h.id,memo:`íšŒì› ${s.username} ì¶œê¸ˆ ìŠ¹ì¸ (ì²˜ë¦¬ì: ${h.username})`})}}if(r==="approve"){if(console.log("ğŸ’° [ì”ê³  ì—…ë°ì´íŠ¸ ì¤€ë¹„]:",{user_id:s.user_id,username:s.username,old_balance:s.current_balance,new_balance:t,has_user_id:!!s.user_id}),!s.user_id)throw console.error("âŒ [ì¹˜ëª…ì  ì˜¤ë¥˜] user_idê°€ ì—†ìŠµë‹ˆë‹¤!",s),new Error("user_idê°€ ì—†ì–´ ì”ê³ ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");const{error:a}=await g.from("users").update({balance:t,updated_at:new Date().toISOString()}).eq("id",s.user_id);if(a)throw console.error("âŒ [ì”ê³  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨]:",a),a;console.log(`âœ… [ì”ê³  ì—…ë°ì´íŠ¸ ì™„ë£Œ] ${s.username}: ${s.current_balance} -> ${t}`)}await U("transaction_processed",{transaction_id:s.id,username:s.username,transaction_type:s.transaction_type,amount:s.amount,action:r,newBalance:t,processedBy:h?.username||"system",note:I||null,target_user_id:s.user_id},1),E&&O&&O("transaction_processed",{transaction_id:s.id,username:s.username,user_id:s.user_id,transaction_type:s.transaction_type,amount:s.amount,action:r,newBalance:t,processedBy:h?.username||"system",note:I||null,timestamp:new Date().toISOString()});const Y=r==="approve"?"ìŠ¹ì¸":"ê±°ì ˆ",Z=s.transaction_type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ";x.success(`${s.username}ë‹˜ì˜ ${Z} ìš”ì²­ì´ ${Y}ë˜ì—ˆìŠµë‹ˆë‹¤.`),$(!1),S(null),B(""),await j()}catch(o){console.error(`ê±°ë˜ ${r} ì²˜ë¦¬ ì‹¤íŒ¨:`,o);const t=o instanceof Error?o.message:String(o);t.includes("ê´€ë¦¬ì ë³´ìœ ê¸ˆ")||t.includes("ë³´ìœ ê¸ˆì´ ë¶€ì¡±")?x.error("âŒ ê´€ë¦¬ì ë³´ìœ ê¸ˆì´ ë¶€ì¡±í•˜ì—¬ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",{description:"ìƒìœ„ ê´€ë¦¬ìì—ê²Œ ë³´ìœ ê¸ˆì„ ìš”ì²­í•˜ì„¸ìš”.",duration:6e3}):t.includes("ë³´ìœ ê¸ˆ ê²€ì¦")?x.error("âŒ ë³´ìœ ê¸ˆ ê²€ì¦ ì‹¤íŒ¨",{description:t,duration:6e3}):x.error(`ê±°ë˜ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${t}`)}finally{q(null)}};m.useEffect(()=>{if(!f)return;const r=setInterval(()=>{console.log("ğŸ”„ [ìë™ìƒˆë¡œê³ ì¹¨] ê±°ë˜ ìš”ì²­ ëª©ë¡ ê°±ì‹ "),j()},3e4);return()=>clearInterval(r)},[f,j]),m.useEffect(()=>{j()},[j]);const H=r=>{switch(r){case"pending":return"bg-yellow-500";case"processing":return"bg-blue-500";case"approved":return"bg-green-500";case"completed":return"bg-green-600";case"rejected":return"bg-red-500";case"failed":return"bg-red-600";default:return"bg-gray-500"}},G=r=>{switch(r){case"pending":return"ëŒ€ê¸°";case"processing":return"ì²˜ë¦¬ì¤‘";case"approved":return"ìŠ¹ì¸";case"completed":return"ì™„ë£Œ";case"rejected":return"ê±°ì ˆ";case"failed":return"ì‹¤íŒ¨";default:return r}},X=b.filter(r=>r.status==="pending").length,J=b.filter(r=>r.status==="processing").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"ì…ì¶œê¸ˆ ìŠ¹ì¸ ê´€ë¦¬"}),e.jsx("p",{className:"text-sm text-slate-400",children:"ì‹¤ì‹œê°„ ì…ì¶œê¸ˆ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê±°ë‚˜ ê±°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",onClick:()=>W(!f),className:f?"bg-green-50 border-green-200":"",children:[e.jsx(P,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"ìë™ìƒˆë¡œê³ ì¹¨ ",f?"ON":"OFF"]}),e.jsxs(_,{onClick:j,disabled:A,children:[e.jsx(P,{className:`h-4 w-4 mr-2 ${A?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(N,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-700",children:"ëŒ€ê¸° ì¤‘"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:X})]}),e.jsx(fe,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(N,{className:"border-blue-200 bg-blue-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700",children:"ì²˜ë¦¬ ì¤‘"}),e.jsx("p",{className:"text-2xl font-bold text-blue-800",children:J})]}),e.jsx(P,{className:"h-8 w-8 text-blue-600 animate-spin"})]})})}),e.jsx(N,{className:"border-green-200 bg-green-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700",children:"ì´ ê±°ë˜"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:b.length})]}),e.jsx(M,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(N,{className:"border-gray-200 bg-gray-50",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700",children:"ì—°ê²° ìƒíƒœ"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:E?"ğŸŸ¢ ì—°ê²°ë¨":"ğŸ”´ ì—°ê²°ëŠê¹€"})]}),e.jsx("div",{className:`h-4 w-4 rounded-full ${E?"bg-green-400":"bg-red-400"} animate-pulse`})]})})})]}),e.jsxs(N,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(te,{children:"ê±°ë˜ ìš”ì²­ ëª©ë¡"}),e.jsx(le,{value:y,onValueChange:Q,children:e.jsxs(oe,{children:[e.jsx(k,{value:"pending",children:"ëŒ€ê¸°ì¤‘"}),e.jsx(k,{value:"processing",children:"ì²˜ë¦¬ì¤‘"}),e.jsx(k,{value:"approved",children:"ìŠ¹ì¸ë¨"}),e.jsx(k,{value:"rejected",children:"ê±°ì ˆë¨"}),e.jsx(k,{value:"all",children:"ì „ì²´"})]})})]})}),e.jsx(v,{children:A?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ie,{}),e.jsx("span",{className:"ml-2",children:"ê±°ë˜ ìš”ì²­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})]}):e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"ê±°ë˜ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤."})]}):b.map(r=>e.jsx("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`h-3 w-3 rounded-full ${H(r.status)}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.nickname}),e.jsx(T,{variant:"outline",className:"text-xs",children:r.username}),e.jsx(T,{variant:r.transaction_type==="deposit"?"default":"destructive",children:r.transaction_type==="deposit"?"ğŸ’° ì…ê¸ˆ":"ğŸ’¸ ì¶œê¸ˆ"})]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[new Date(r.request_time).toLocaleString("ko-KR")," Â· í˜„ì¬ì”ê³ : ",r.current_balance.toLocaleString(),"ì›"]}),r.bank_info?.bank_name&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.bank_info.bank_name," ",r.bank_info.bank_account," (",r.bank_info.bank_holder,")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${r.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[r.transaction_type==="deposit"?"+":"-",r.amount.toLocaleString(),"ì›"]}),e.jsx("div",{className:"text-sm text-gray-500",children:G(r.status)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>{S(r),$(!0)},children:e.jsx(je,{className:"h-4 w-4"})}),r.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{size:"sm",onClick:()=>{S(r),C("approve")},disabled:w===r.id,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(F,{className:"h-4 w-4 mr-1"}),"ìŠ¹ì¸"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>{S(r),C("reject")},disabled:w===r.id,children:[e.jsx(K,{className:"h-4 w-4 mr-1"}),"ê±°ì ˆ"]})]}),w===r.id&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"ì²˜ë¦¬ì¤‘..."})]})]})]})]})},r.id))})})]}),e.jsx(ce,{open:z,onOpenChange:$,children:e.jsxs(de,{className:"sm:max-w-[600px]",children:[e.jsxs(me,{children:[e.jsx(ue,{children:"ê±°ë˜ ìš”ì²­ ì²˜ë¦¬"}),e.jsx(pe,{children:"ì„ íƒí•œ ê±°ë˜ ìš”ì²­ì„ ìŠ¹ì¸í•˜ê±°ë‚˜ ê±°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"ìš”ì²­ì:"}),e.jsxs("span",{children:[s.nickname," (",s.username,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"ê±°ë˜ ìœ í˜•:"}),e.jsx(T,{variant:s.transaction_type==="deposit"?"default":"destructive",children:s.transaction_type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"ìš”ì²­ ê¸ˆì•¡:"}),e.jsxs("span",{className:`font-bold ${s.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[s.transaction_type==="deposit"?"+":"-",s.amount.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"í˜„ì¬ ì”ê³ :"}),e.jsxs("span",{className:"font-mono",children:[s.current_balance.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"ìš”ì²­ ì‹œê°„:"}),e.jsx("span",{children:new Date(s.request_time).toLocaleString("ko-KR")})]}),s.bank_info?.bank_name&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"ì€í–‰ ì •ë³´:"}),e.jsxs("span",{className:"text-sm",children:[s.bank_info.bank_name," ",s.bank_info.bank_account,e.jsx("br",{}),"(",s.bank_info.bank_holder,")"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(xe,{htmlFor:"processing-note",children:"ì²˜ë¦¬ ë©”ëª¨ (ì„ íƒì‚¬í•­)"}),e.jsx(he,{id:"processing-note",value:I,onChange:r=>B(r.target.value),placeholder:"ì²˜ë¦¬ ì‚¬ìœ ë‚˜ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(be,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"ì²˜ë¦¬ ì£¼ì˜ì‚¬í•­:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"â€¢ ìŠ¹ì¸ ì‹œ ì™¸ë¶€ Invest APIê°€ í˜¸ì¶œë˜ì–´ ì‹¤ì œ ì”ê³ ê°€ ë³€ê²½ë©ë‹ˆë‹¤."}),e.jsx("li",{children:"â€¢ ì¶œê¸ˆ ìŠ¹ì¸ ì‹œ ì¶©ë¶„í•œ ì”ê³ ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”."}),e.jsx("li",{children:"â€¢ ì²˜ë¦¬ í›„ì—ëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("li",{children:"â€¢ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤."})]})]})]})]}),e.jsxs(ge,{children:[e.jsx(_,{variant:"outline",onClick:()=>$(!1),children:"ì·¨ì†Œ"}),e.jsxs(_,{variant:"destructive",onClick:()=>C("reject"),disabled:w===s?.id,children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"ê±°ì ˆ"]}),e.jsxs(_,{onClick:()=>C("approve"),disabled:w===s?.id,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"ìŠ¹ì¸"]})]})]})})]})}export{$e as TransactionApprovalManager,$e as default};
